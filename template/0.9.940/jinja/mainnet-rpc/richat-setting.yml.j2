---
logs:
  json: false

metrics:
  endpoint: 0.0.0.0:10124

channel:
  tokio:
    worker_threads: null
    affinity: null

  sources:
    - name: plugin-grpc
      parser: prost
      disable_accounts: false
      reconnect: null
      source: richat
      transport: grpc
      endpoint: http://127.0.0.1:10004
      ca_certificate: null
      connect_timeout: null
      buffer_size: null
      http2_adaptive_window: true
      http2_keep_alive_interval: 30s
      initial_connection_window_size: 67108864   # 64MiB
      initial_stream_window_size: 16777216       # 16MiB
      keep_alive_timeout: 10s
      keep_alive_while_idle: false
      tcp_keepalive: 30s
      tcp_nodelay: true
      timeout: null
      max_decoding_message_size: 16MiB
      compression:
        accept: []
        send: []
      x_token: null

  config:
    max_messages: 2_097_152
    max_bytes: 16GiB

apps:
  tokio:
    worker_threads: null
    affinity: null

  richat:
    grpc:
      endpoint: "0.0.0.0:10100"
      compression:
        accept:
          - gzip
          - zstd
        send:
          - zstd
      max_decoding_message_size: 16MiB
      server_tcp_keepalive: 30s
      server_tcp_nodelay: true
      server_http2_adaptive_window: true
      server_http2_keepalive_interval: 30s
      server_http2_keepalive_timeout: 10s
      server_initial_connection_window_size: 67108864
      server_initial_stream_window_size: 16777216

    quic:
      endpoint: "0.0.0.0:10101"
      tls_config:
        self_signed_alt_names:
          - localhost
      expected_rtt: 100
      max_stream_bandwidth: 12_500_000
      max_idle_timeout: 30
      max_recv_streams: 16
      max_request_size: 1024
      x_tokens: []

  grpc:
    server:
      endpoint: 0.0.0.0:10000
      compression:
        accept:
          - gzip
          - zstd
        send:
          - zstd
      max_decoding_message_size: 16MiB
      server_tcp_keepalive: 30s
      server_tcp_nodelay: true
      server_http2_adaptive_window: true
      server_http2_keepalive_interval: 30s
      server_http2_keepalive_timeout: 10s
      server_initial_connection_window_size: 67108864
      server_initial_stream_window_size: 16777216

    stream:
      messages_len_max: 16MiB
      messages_max_per_tick: 100
      messages_replay_len_max: 256MiB
      ping_interval: 30s

    unary:
      enabled: true
      affinity: null
      requests_queue_size: 100